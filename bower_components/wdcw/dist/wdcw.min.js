/*! wdcw.2.0.0-beta.1.6:14:58 2016-06-12 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.wdcw=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){e=a,f=this,this.semaphore={}}c=b.exports=d;var e,f;d.prototype.registerDataRetrieval=function(a,b){return f.semaphore[a]=b,b},d.prototype.waitForData=function(a){if(!f.semaphore.hasOwnProperty(a))throw"Could not find data gathering semaphore for table: "+a;return f.semaphore[a]},d.prototype.getConnectionData=function(a){var b=e.connectionData?JSON.parse(e.connectionData):{};return a?b.hasOwnProperty(a)?b[a]:"":b},d.prototype.setConnectionData=function(a){return e.connectionData=JSON.stringify(a),a},d.getUsername=function(){return e.username},d.prototype.setUsername=function(a){return e.username=a,e.username},d.prototype.getPassword=function(){return e.password},d.prototype.setPassword=function(a){return e.password=a,e.password},d.prototype.ajaxErrorHandler=function(a,b,c){var d='There was a problem retrieving data: "'+b+'" with error thrown: "'+c+'"';e.abortWithError(d)},d.prototype.promiseErrorHandler=function(a){"string"==typeof a?e.abortWithError(a):e.abortWithError(JSON.stringify(a))},d.prototype.getAuthPurpose=function(){return e.authPurpose}},{}],2:[function(a,b,c){c=b.exports=function(a,b,c,d){return function(){d("form").submit(function(e){var f=d("input, select, textarea").not('[type="password"],[type="submit"],[name="username"]'),g=d('input[type="password"]'),h=d('input[name="username"]'),i={};return e.preventDefault(),f.map(function(){var a=d(this);return name=a.attr("name"),name&&(a.is(":checkbox")?i[name]=a.is(":checked"):i[name]=a.val()),this}),f.length&&i==={}?!1:(a.setConnectionData(i),c.connectionName=b.name,g.length&&a.setPassword(g.val()),h.length&&a.setUsername(h.val()),void c.submit())})}}},{}],3:[function(a,b,c){c=b.exports=function(a,b,c,d){return function(e,f){var g,h,i=e.tableInfo.id,j=e.tableInfo.dependsOn;if(!b.tables.hasOwnProperty(i)||"function"!=typeof b.tables[i].getData)return c.abortWithError("Data callback missing for table: "+i),f();if(g=b.tables[i].hasOwnProperty("postProcess")&&"function"==typeof b.tables[i].postProcess?b.tables[i].postProcess:function(a){return d.resolve(a)},j)try{h=d.all(j.map(a.waitForData))}catch(k){return c.abortWithError("Attempted to gather dependent table data before its requisites. Make sure your table definitions are in order."),c.abortWithError(k),f()}else h=d.resolve();h.then(function(c){return a.registerDataRetrieval(i,b.tables[i].getData.call(a,e.incrementValue,c,e.appendRows))},a.promiseErrorHandler).then(g,a.promiseErrorHandler).then(function(a){e.appendRows(a||[]),f()},a.promiseErrorHandler)["catch"](a.promiseErrorHandler)}}},{}],4:[function(a,b,c){c=b.exports=function(a,b){return function(c){b.schema.call(a).then(c,a.promiseErrorHandler)["catch"](a.promiseErrorHandler)}}},{}],5:[function(a,b,c){c=b.exports=function(a,b,c,d){function e(){return Promise.resolve()}return function(f){var g,h,i=this.getConnectionData(),j=b.hasOwnProperty("setup")?b.setup:e;if(b.authType&&(d.authType=b.authType),d.phase===d.phaseEnum.interactivePhase){for(h in i)i.hasOwnProperty(h)&&(g=c('*[name="'+h+'"]'),g.length&&(g.is(":checkbox")?g.attr("checked",!!i[h]).change():g.val(i[h]).change()));d.username&&c('input[name="username"]').val(d.username),d.password&&c('input[type="password"]').val(d.password)}j.call(a,d.phase).then(f,a.promiseErrorHandler)["catch"](a.promiseErrorHandler)}}},{}],6:[function(a,b,c){c=b.exports=function(a,b){function c(){return Promise.resolve()}return function(d){var e=b.hasOwnProperty("teardown")?b.teardown:c;e.call(a,tableau.phase).then(d,a.promiseErrorHandler)["catch"](a.promiseErrorHandler)}}},{}],wdcw:[function(a,b,c){(function(d){function e(b){var c=new i(h);b=b||{tables:{}},this.config=b,c.init=a("./connector/init")(c,b,f,h),c.shutdown=a("./connector/shutdown")(c,b),c.getSchema=a("./connector/getSchema")(c,b),c.getData=a("./connector/getData")(c,b,h,g),f(a("./connector/domReady")(c,b,h,f)),h.registerConnector(c),this.getConnector=function(){return c}}c=b.exports=e;var f="undefined"!=typeof window?window.jQuery:"undefined"!=typeof d?d.jQuery:null,g="undefined"!=typeof window?window.Promise:"undefined"!=typeof d?d.Promise:null,h="undefined"!=typeof window?window.tableau:"undefined"!=typeof d?d.tableau:null,i=a("./Connector");e.prototype.registerSetup=function(a){return this.config.setup=a,this},e.prototype.registerTeardown=function(a){return this.config.teardown=a,this},e.prototype.registerSchema=function(a){return this.config.schema=a,this},e.prototype.registerData=function(a,b){return this.config.tables.hasOwnProperty(a)||(this.config.tables[a]={}),this.config.tables[a].getData=b,this},e.prototype.registerPostProcess=function(a,b){return this.config.tables.hasOwnProperty(a)||(this.config.tables[a]={}),this.config.tables[a].postProcess=b,this}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Connector":1,"./connector/domReady":2,"./connector/getData":3,"./connector/getSchema":4,"./connector/init":5,"./connector/shutdown":6}]},{},["wdcw"])("wdcw")});